var index_cjs$2={},polyfills_cjs$1={};function _extends$2(){return _extends$2=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends$2.apply(this,arguments)}function _object_without_properties_loose(e,n){if(e==null)return{};var s={},t=Object.keys(e),a,d;for(d=0;d<t.length;d++)a=t[d],!(n.indexOf(a)>=0)&&(s[a]=e[a]);return s}polyfills_cjs$1._extends=_extends$2;polyfills_cjs$1._object_without_properties_loose=_object_without_properties_loose;var index_cjs$1={},__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,n)=>{for(var s in n)__defProp(e,s,{get:n[s],enumerable:!0})},__copyProps=(e,n,s,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of __getOwnPropNames(n))!__hasOwnProp.call(e,a)&&a!==s&&__defProp(e,a,{get:()=>n[a],enumerable:!(t=__getOwnPropDesc(n,a))||t.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),browser_exports={};__export(browser_exports,{createLogger:()=>createLogger2,logger:()=>logger$2});var browser=__toCommonJS(browser_exports),supportsSubstitutions=void 0,supportColor=()=>{if(typeof supportsSubstitutions<"u")return supportsSubstitutions;try{const e="color test",n="color: red;",s=console.log;console.log=(...t)=>{t[0]===`%c${e}`&&t[1]===n&&(supportsSubstitutions=!0)},console.log(`%c${e}`,n),console.log=s}catch{supportsSubstitutions=!1}return supportsSubstitutions},ansiToCss={bold:"font-weight: bold;",red:"color: red;",green:"color: green;",orange:"color: orange;",dodgerblue:"color: dodgerblue;",magenta:"color: magenta;",gray:"color: gray;"},formatter=e=>supportColor()?n=>{if(Array.isArray(n)){const[s,t]=n;return[`%c${s.replace("%c","")}`,t?`${ansiToCss[e]}${t}`:`${ansiToCss[e]||""}`]}return[`%c${String(n).replace("%c","")}`,ansiToCss[e]||""]}:n=>[String(n)],bold=formatter("bold"),red=formatter("red"),green=formatter("green"),orange=formatter("orange"),dodgerblue=formatter("dodgerblue"),magenta=formatter("magenta");formatter("gray");function getLabel(e,n,s){let t=[""];return"label"in n&&(t=[s[e]||n.label||""],t=bold(n.color?n.color(t):t[0])),t=t.filter(Boolean),t}function finalLog(e,n,s,t){e.length?Array.isArray(t)?console.log(...e,...t):console.log(...e,n):Array.isArray(t)?console.log(...t):console.log(n,...s)}var LOG_LEVEL={error:0,warn:1,info:2,log:3,verbose:4},errorStackRegExp=/at\s.*:\d+:\d+[\s\)]*$/,anonymousErrorStackRegExp=/at\s.*\(<anonymous>\)$/,isErrorStackMessage=e=>errorStackRegExp.test(e)||anonymousErrorStackRegExp.test(e),createLogger$1=(e={},{getLabel:n,handleError:s,finalLog:t,greet:a,LOG_TYPES:d})=>{let m=e.level||"log",p=e.labels||{},E=($,T,...P)=>{if(LOG_LEVEL[d[$].level]>LOG_LEVEL[m])return;if(T==null)return console.log();let k=d[$],H="";const D=n($,k,p);if(T instanceof Error)if(T.stack){let[U,...F]=T.stack.split(`
`);U.startsWith("Error: ")&&(U=U.slice(7)),H=`${U}
${s(F.join(`
`))}`}else H=T.message;else k.level==="error"&&typeof T=="string"?H=T.split(`
`).map(F=>isErrorStackMessage(F)?s(F):F).join(`
`):H=`${T}`;t(D,H,P,T)},y={greet:$=>E("log",a($))};return Object.keys(d).forEach($=>{y[$]=(...T)=>E($,...T)}),Object.defineProperty(y,"level",{get:()=>m,set($){m=$}}),Object.defineProperty(y,"labels",{get:()=>p,set($){p=$}}),y.override=$=>{Object.assign(y,$)},y},startColor=[189,255,243],endColor=[74,194,154],isWord=e=>!/[\s\n]/.test(e);function gradient(e){if(!supportColor())return[e];const n=[...e],s=n.filter(isWord),t=s.length-1;if(t===0)return console.log(`%c${e}`,`color: rgb(${startColor.join(",")}); font-weight: bold;`),[e];let a="",d=[];return n.forEach(m=>{if(isWord(m)){const p=s.indexOf(m)/t,E=Math.round(startColor[0]+(endColor[0]-startColor[0])*p),y=Math.round(startColor[1]+(endColor[1]-startColor[1])*p),$=Math.round(startColor[2]+(endColor[2]-startColor[2])*p);a+=`%c${m}`,d.push(`color: rgb(${E},${y},${$}); font-weight: bold;`)}else a+=m}),[a,...d]}var LOG_TYPES={error:{label:"error",level:"error",color:red},warn:{label:"warn",level:"warn",color:orange},info:{label:"info",level:"info",color:dodgerblue},start:{label:"start",level:"info",color:dodgerblue},ready:{label:"ready",level:"info",color:green},success:{label:"success",level:"info",color:green},log:{level:"log"},debug:{label:"debug",level:"verbose",color:magenta}};function createLogger2(e={}){return createLogger$1(e,{handleError:n=>n,getLabel,gradient,finalLog,LOG_TYPES,greet:n=>gradient(n)})}var logger$2=createLogger2(),polyfills_cjs={};function _extends$1(){return _extends$1=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends$1.apply(this,arguments)}polyfills_cjs._extends=_extends$1;var define_process_env_default={},isomorphicRslog=browser,polyfills$1=polyfills_cjs;const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return typeof window<"u"}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return!1}return!1}function isDebugMode(){return typeof process<"u"&&define_process_env_default&&define_process_env_default.FEDERATION_DEBUG?!!define_process_env_default.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&FEDERATION_DEBUG?!0:isBrowserDebug()}const getProcessEnv=function(){return typeof process<"u"&&define_process_env_default?define_process_env_default:{}},PREFIX="[ Module Federation ]";function setDebug(e){isDebugMode()&&(e.level="verbose")}function setPrefix(e,n){e.labels={warn:`${n} Warn`,error:`${n} Error`,success:`${n} Success`,info:`${n} Info`,ready:`${n} Ready`,debug:`${n} Debug`}}function createLogger(e){const n=isomorphicRslog.createLogger({labels:{warn:`${PREFIX} Warn`,error:`${PREFIX} Error`,success:`${PREFIX} Success`,info:`${PREFIX} Info`,ready:`${PREFIX} Ready`,debug:`${PREFIX} Debug`}});return setDebug(n),setPrefix(n,e),n}const logger$1=createLogger(PREFIX),LOG_CATEGORY$1="[ Federation Runtime ]",parseEntry=(e,n,s=SEPARATOR)=>{const t=e.split(s),a=getProcessEnv().NODE_ENV==="development"&&n,d="*",m=p=>p.startsWith("http")||p.includes(MANIFEST_EXT);if(t.length>=2){let[p,...E]=t;e.startsWith(s)&&(E=[a||t.slice(-1)[0]],p=t.slice(0,-1).join(s));let y=a||E.join(s);return m(y)?{name:p,entry:y}:{name:p,version:y||d}}else if(t.length===1){const[p]=t;return a&&m(a)?{name:p,entry:a}:{name:p,version:a||d}}else throw`Invalid entry value: ${e}`},composeKeyWithSeparator=function(...e){return e.length?e.reduce((n,s)=>s?n?`${n}${SEPARATOR}${s}`:s:n,""):""},encodeName=function(e,n="",s=!1){try{const t=s?".js":"";return`${n}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${t}`}catch(t){throw t}},decodeName=function(e,n,s){try{let t=e;if(n){if(!t.startsWith(n))return t;t=t.replace(new RegExp(n,"g"),"")}return t=t.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),s&&(t=t.replace(".js","")),t}catch(t){throw t}},generateExposeFilename=(e,n)=>{if(!e)return"";let s=e;return s==="."&&(s="default_export"),s.startsWith("./")&&(s=s.replace("./","")),encodeName(s,"__federation_expose_",n)},generateShareFilename=(e,n)=>e?encodeName(e,"__federation_shared_",n):"",getResourceUrl=(e,n)=>{if("getPublicPath"in e){let s;return e.getPublicPath.startsWith("function")?s=new Function("return "+e.getPublicPath)()():s=new Function(e.getPublicPath)(),`${s}${n}`}else return"publicPath"in e?`${e.publicPath}${n}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,n),"")},assert$1=(e,n)=>{e||error$1(n)},error$1=e=>{throw new Error(`${LOG_CATEGORY$1}: ${e}`)},warn$1=e=>{console.warn(`${LOG_CATEGORY$1}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}const VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(e){return VERSION_PATTERN_REGEXP.test(e)}const simpleJoinRemoteEntry=(e,n)=>{if(!e)return n;const t=(a=>{if(a===".")return"";if(a.startsWith("./"))return a.replace("./","");if(a.startsWith("/")){const d=a.slice(1);return d.endsWith("/")?d.slice(0,-1):d}return a})(e);return t?t.endsWith("/")?`${t}${n}`:`${t}/${n}`:n};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,n={}){var s,t;const{remotes:a={},overrides:d={},version:m}=n;let p;const E=()=>"publicPath"in e.metaData?e.metaData.publicPath==="auto"&&m?inferAutoPublicPath(m):e.metaData.publicPath:e.metaData.getPublicPath,y=Object.keys(d);let $={};if(!Object.keys(a).length){var T;$=((T=e.remotes)==null?void 0:T.reduce((M,X)=>{let J;const ee=X.federationContainerName;return y.includes(ee)?J=d[ee]:"version"in X?J=X.version:J=X.entry,M[ee]={matchedVersion:J},M},{}))||{}}Object.keys(a).forEach(M=>$[M]={matchedVersion:y.includes(M)?d[M]:a[M]});const{remoteEntry:{path:P,name:k,type:H},types:D,buildInfo:{buildVersion:U},globalName:F,ssrRemoteEntry:j}=e.metaData,{exposes:Q}=e;let q={version:m||"",buildVersion:U,globalName:F,remoteEntry:simpleJoinRemoteEntry(P,k),remoteEntryType:H,remoteTypes:simpleJoinRemoteEntry(D.path,D.name),remoteTypesZip:D.zip||"",remoteTypesAPI:D.api||"",remotesInfo:$,shared:e?.shared.map(M=>({assets:M.assets,sharedName:M.name,version:M.version})),modules:Q?.map(M=>({moduleName:M.name,modulePath:M.path,assets:M.assets}))};if((s=e.metaData)!=null&&s.prefetchInterface){const M=e.metaData.prefetchInterface;q=polyfills$1._extends({},q,{prefetchInterface:M})}if((t=e.metaData)!=null&&t.prefetchEntry){const{path:M,name:X,type:J}=e.metaData.prefetchEntry;q=polyfills$1._extends({},q,{prefetchEntry:simpleJoinRemoteEntry(M,X),prefetchEntryType:J})}if("publicPath"in e.metaData?p=polyfills$1._extends({},q,{publicPath:E()}):p=polyfills$1._extends({},q,{getPublicPath:E()}),j){const M=simpleJoinRemoteEntry(j.path,j.name);p.ssrRemoteEntry=M,p.ssrRemoteEntryType=j.type||"commonjs-module"}return p}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,n){try{return await e()}catch(s){!n&&warn$1(s);return}}function isStaticResourcesEqual(e,n){const s=/^(https?:)?\/\//i,t=e.replace(s,"").replace(/\/$/,""),a=n.replace(s,"").replace(/\/$/,"");return t===a}function createScript(e){let n=null,s=!0,t=2e4,a;const d=document.getElementsByTagName("script");for(let p=0;p<d.length;p++){const E=d[p],y=E.getAttribute("src");if(y&&isStaticResourcesEqual(y,e.url)){n=E,s=!1;break}}if(!n){const p=e.attrs;n=document.createElement("script"),n.type=p?.type==="module"?"module":"text/javascript";let E;e.createScriptHook&&(E=e.createScriptHook(e.url,e.attrs),E instanceof HTMLScriptElement?n=E:typeof E=="object"&&("script"in E&&E.script&&(n=E.script),"timeout"in E&&E.timeout&&(t=E.timeout))),n.src||(n.src=e.url),p&&!E&&Object.keys(p).forEach(y=>{n&&(y==="async"||y==="defer"?n[y]=p[y]:n.getAttribute(y)||n.setAttribute(y,p[y]))})}const m=async(p,E)=>{var y;if(clearTimeout(a),n&&(n.onerror=null,n.onload=null,safeWrapper(()=>{const{needDeleteScript:P=!0}=e;P&&n?.parentNode&&n.parentNode.removeChild(n)}),p&&typeof p=="function")){var $;const P=p(E);if(P instanceof Promise){var T;const k=await P;return e==null||(T=e.cb)==null||T.call(e),k}return e==null||($=e.cb)==null||$.call(e),P}e==null||(y=e.cb)==null||y.call(e)};return n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),a=setTimeout(()=>{m(null,new Error(`Remote script "${e.url}" time-outed.`))},t),{script:n,needAttach:s}}function createLink(e){let n=null,s=!0;const t=document.getElementsByTagName("link");for(let d=0;d<t.length;d++){const m=t[d],p=m.getAttribute("href"),E=m.getAttribute("ref");if(p&&isStaticResourcesEqual(p,e.url)&&E===e.attrs.ref){n=m,s=!1;break}}if(!n){n=document.createElement("link"),n.setAttribute("href",e.url);let d;const m=e.attrs;e.createLinkHook&&(d=e.createLinkHook(e.url,m),d instanceof HTMLLinkElement&&(n=d)),m&&!d&&Object.keys(m).forEach(p=>{n&&!n.getAttribute(p)&&n.setAttribute(p,m[p])})}const a=(d,m)=>{if(n&&(n.onerror=null,n.onload=null,safeWrapper(()=>{const{needDeleteLink:p=!0}=e;p&&n?.parentNode&&n.parentNode.removeChild(n)}),d)){const p=d(m);return e.cb(),p}e.cb()};return n.onerror=a.bind(null,n.onerror),n.onload=a.bind(null,n.onload),{link:n,needAttach:s}}function loadScript(e,n){const{attrs:s={},createScriptHook:t}=n;return new Promise((a,d)=>{const{script:m,needAttach:p}=createScript({url:e,cb:a,attrs:polyfills$1._extends({fetchpriority:"high"},s),createScriptHook:t,needDeleteScript:!0});p&&document.head.appendChild(m)})}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then(s=>s).catch(s=>{throw console.error(`Error importing module ${e}:`,s),s})}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,n,s)=>{const a=await((d,m)=>s.lifecycle.fetch.emit(d,m))(e,n||{});return!a||!(a instanceof Response)?(typeof fetch>"u"?await loadNodeFetch():fetch)(e,n||{}):a};function createScriptNode(url,cb,attrs,loaderHook){if(loaderHook?.createScriptHook){const e=loaderHook.createScriptHook(url);e&&typeof e=="object"&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){console.error("Error constructing URL:",e),cb(new Error(`Invalid URL: ${e}`));return}const getFetch=async()=>loaderHook?.fetch?(e,n)=>lazyLoaderHookFetch(e,n,loaderHook):typeof fetch>"u"?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,e);return}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then(async e=>{if(attrs?.type==="esm"||attrs?.type==="module")return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then(async n=>{await n.evaluate(),cb(void 0,n.namespace)}).catch(n=>{cb(n instanceof Error?n:new Error(`Script execution error: ${n}`))});handleScriptFetch(e,urlObj)}).catch(e=>{cb(e)})}function loadScriptNode(e,n){return new Promise((s,t)=>{createScriptNode(e,(a,d)=>{if(a)t(a);else{var m,p;const E=(n==null||(m=n.attrs)==null?void 0:m.globalName)||`__FEDERATION_${n==null||(p=n.attrs)==null?void 0:p.name}:custom__`,y=globalThis[E]=d;s(y)}},n.attrs,n.loaderHook)})}async function loadModule(e,n){const{fetch:s,vm:t}=n,d=await(await s(e)).text(),m=new t.SourceTextModule(d,{importModuleDynamically:async(p,E)=>{const y=new URL(p,e).href;return loadModule(y,n)}});return await m.link(async p=>{const E=new URL(p,e).href;return await loadModule(E,n)}),m}function normalizeOptions(e,n,s){return function(t){if(t===!1)return!1;if(typeof t>"u")return e?n:!1;if(t===!0)return n;if(t&&typeof t=="object")return polyfills$1._extends({},n,t);throw new Error(`Unexpected type for \`${s}\`, expect boolean/undefined/object, got: ${typeof t}`)}}index_cjs$1.BROWSER_LOG_KEY=BROWSER_LOG_KEY;index_cjs$1.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE;index_cjs$1.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX;index_cjs$1.EncodedNameTransformMap=EncodedNameTransformMap;index_cjs$1.FederationModuleManifest=FederationModuleManifest;index_cjs$1.MANIFEST_EXT=MANIFEST_EXT;index_cjs$1.MFModuleType=MFModuleType;index_cjs$1.MFPrefetchCommon=MFPrefetchCommon;index_cjs$1.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER;index_cjs$1.ManifestFileName=ManifestFileName;index_cjs$1.NameTransformMap=NameTransformMap;index_cjs$1.NameTransformSymbol=NameTransformSymbol;index_cjs$1.SEPARATOR=SEPARATOR;index_cjs$1.StatsFileName=StatsFileName;index_cjs$1.TEMP_DIR=TEMP_DIR;index_cjs$1.assert=assert$1;index_cjs$1.composeKeyWithSeparator=composeKeyWithSeparator;index_cjs$1.containerPlugin=ContainerPlugin;index_cjs$1.containerReferencePlugin=ContainerReferencePlugin;index_cjs$1.createLink=createLink;index_cjs$1.createLogger=createLogger;index_cjs$1.createScript=createScript;index_cjs$1.createScriptNode=createScriptNode;index_cjs$1.decodeName=decodeName;index_cjs$1.encodeName=encodeName;index_cjs$1.error=error$1;index_cjs$1.generateExposeFilename=generateExposeFilename;index_cjs$1.generateShareFilename=generateShareFilename;index_cjs$1.generateSnapshotFromManifest=generateSnapshotFromManifest;index_cjs$1.getProcessEnv=getProcessEnv;index_cjs$1.getResourceUrl=getResourceUrl;index_cjs$1.inferAutoPublicPath=inferAutoPublicPath;index_cjs$1.isBrowserEnv=isBrowserEnv;index_cjs$1.isDebugMode=isDebugMode;index_cjs$1.isManifestProvider=isManifestProvider;index_cjs$1.isRequiredVersion=isRequiredVersion;index_cjs$1.isStaticResourcesEqual=isStaticResourcesEqual;index_cjs$1.loadScript=loadScript;index_cjs$1.loadScriptNode=loadScriptNode;index_cjs$1.logger=logger$1;index_cjs$1.moduleFederationPlugin=ModuleFederationPlugin;index_cjs$1.normalizeOptions=normalizeOptions;index_cjs$1.parseEntry=parseEntry;index_cjs$1.safeToString=safeToString;index_cjs$1.safeWrapper=safeWrapper;index_cjs$1.sharePlugin=SharePlugin;index_cjs$1.simpleJoinRemoteEntry=simpleJoinRemoteEntry;index_cjs$1.warn=warn$1;var share_cjs={},polyfills=polyfills_cjs$1,sdk=index_cjs$1;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}const LOG_CATEGORY="[ Federation Runtime ]",logger=sdk.createLogger(LOG_CATEGORY);function assert(e,n){e||error(n)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY}: ${e.message}`,e):new Error(`${LOG_CATEGORY}: ${e}`)}function warn(e){e instanceof Error&&(e.message=`${LOG_CATEGORY}: ${e.message}`),logger.warn(e)}function addUniqueItem(e,n){return e.findIndex(s=>s===n)===-1&&e.push(n),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return typeof e.entry<"u"}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function isObject(e){return e&&typeof e=="object"}const objectToString=Object.prototype.toString;function isPlainObject(e){return objectToString.call(e)==="[object Object]"}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const n={url:"",type:"global",globalName:""};return sdk.isBrowserEnv()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:n:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||n.url,type:e.ssrRemoteEntryType||n.type,globalName:e.globalName}:n}const processModuleAlias=(e,n)=>{let s;return e.endsWith("/")?s=e.slice(0,-1):s=e,n.startsWith(".")&&(n=n.slice(1)),s=s+n,s},CurrentGlobal=typeof globalThis=="object"?globalThis:window,nativeGlobal=(()=>{try{return document.defaultView}catch{return CurrentGlobal}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,n,s){Object.defineProperty(e,n,{value:s,configurable:!1,writable:!0})}function includeOwnProperty(e,n){return Object.hasOwnProperty.call(e,n)}includeOwnProperty(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=CurrentGlobal.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var n,s,t,a,d,m;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__));var p;(p=(n=e.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(n.__GLOBAL_PLUGIN__=[]);var E;(E=(s=e.__FEDERATION__).__INSTANCES__)!=null||(s.__INSTANCES__=[]);var y;(y=(t=e.__FEDERATION__).moduleInfo)!=null||(t.moduleInfo={});var $;($=(a=e.__FEDERATION__).__SHARE__)!=null||(a.__SHARE__={});var T;(T=(d=e.__FEDERATION__).__MANIFEST_LOADING__)!=null||(d.__MANIFEST_LOADING__={});var P;(P=(m=e.__FEDERATION__).__PRELOADED_MAP__)!=null||(m.__PRELOADED_MAP__=new Map)}setGlobalDefaultVal(CurrentGlobal);setGlobalDefaultVal(nativeGlobal);function resetFederationGlobalInfo(){CurrentGlobal.__FEDERATION__.__GLOBAL_PLUGIN__=[],CurrentGlobal.__FEDERATION__.__INSTANCES__=[],CurrentGlobal.__FEDERATION__.moduleInfo={},CurrentGlobal.__FEDERATION__.__SHARE__={},CurrentGlobal.__FEDERATION__.__MANIFEST_LOADING__={},Object.keys(globalLoading).forEach(e=>{delete globalLoading[e]})}function getGlobalFederationInstance(e,n){const s=getBuilderId();return CurrentGlobal.__FEDERATION__.__INSTANCES__.find(t=>!!(s&&t.options.id===getBuilderId()||t.options.name===e&&!t.options.version&&!n||t.options.name===e&&n&&t.options.version===n))}function setGlobalFederationInstance(e){CurrentGlobal.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,n=sdk.isDebugMode()){n&&(CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.8.2")}function getInfoWithoutType(e,n){if(typeof n=="string"){if(e[n])return{value:e[n],key:n};{const t=Object.keys(e);for(const a of t){const[d,m]=a.split(":"),p=`${d}:${n}`,E=e[p];if(E)return{value:E,key:p}}return{value:void 0,key:n}}}else throw new Error("key must be string")}const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,n)=>{const s=getFMId(e),t=getInfoWithoutType(n,s).value;if(t&&!t.version&&"version"in e&&e.version&&(t.version=e.version),t)return t;if("version"in e&&e.version){const{version:a}=e,d=polyfills._object_without_properties_loose(e,["version"]),m=getFMId(d),p=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,m).value;if(p?.version===a)return p}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,n)=>{const s=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[s]=n,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=polyfills._extends({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const n=Object.keys(e);for(const s of n)delete nativeGlobal.__FEDERATION__.moduleInfo[s]}),getRemoteEntryExports=(e,n)=>{const s=n||`__FEDERATION_${e}:custom__`,t=CurrentGlobal[s];return{remoteEntryKey:s,entryExports:t}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:n}=nativeGlobal.__FEDERATION__;e.forEach(s=>{n.findIndex(t=>t.name===s.name)===-1?n.push(s):warn(`The plugin ${s.name} has been registered.`)})},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||e.toLowerCase()==="x"||e==="*"}function pipe(...e){return n=>e.reduce((s,t)=>t(s),n)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,n,s,t){const a=`${e}.${n}.${s}`;return t?`${a}-${t}`:a}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(n,s,t,a,d,m,p,E,y,$,T,P)=>(isXVersion(t)?s="":isXVersion(a)?s=`>=${t}.0.0`:isXVersion(d)?s=`>=${t}.${a}.0`:s=`>=${s}`,isXVersion(y)?E="":isXVersion($)?E=`<${Number(y)+1}.0.0-0`:isXVersion(T)?E=`<${y}.${Number($)+1}.0-0`:P?E=`<=${y}.${$}.${T}-${P}`:E=`<=${E}`,`${s} ${E}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(n=>n.replace(parseRegex(caret),(s,t,a,d,m)=>isXVersion(t)?"":isXVersion(a)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?t==="0"?`>=${t}.${a}.0 <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.0 <${Number(t)+1}.0.0-0`:m?t==="0"?a==="0"?`>=${t}.${a}.${d}-${m} <${t}.${a}.${Number(d)+1}-0`:`>=${t}.${a}.${d}-${m} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d}-${m} <${Number(t)+1}.0.0-0`:t==="0"?a==="0"?`>=${t}.${a}.${d} <${t}.${a}.${Number(d)+1}-0`:`>=${t}.${a}.${d} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d} <${Number(t)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(n=>n.replace(parseRegex(tilde),(s,t,a,d,m)=>isXVersion(t)?"":isXVersion(a)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?`>=${t}.${a}.0 <${t}.${Number(a)+1}.0-0`:m?`>=${t}.${a}.${d}-${m} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d} <${t}.${Number(a)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(n=>n.trim().replace(parseRegex(xRange),(s,t,a,d,m,p)=>{const E=isXVersion(a),y=E||isXVersion(d),$=y||isXVersion(m);return t==="="&&$&&(t=""),p="",E?t===">"||t==="<"?"<0.0.0-0":"*":t&&$?(y&&(d=0),m=0,t===">"?(t=">=",y?(a=Number(a)+1,d=0,m=0):(d=Number(d)+1,m=0)):t==="<="&&(t="<",y?a=Number(a)+1:d=Number(d)+1),t==="<"&&(p="-0"),`${t+a}.${d}.${m}${p}`):y?`>=${a}.0.0${p} <${Number(a)+1}.0.0-0`:$?`>=${a}.${d}.0${p} <${a}.${Number(d)+1}.0-0`:s})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,n){return e=Number(e)||e,n=Number(n)||n,e>n?1:e===n?0:-1}function comparePreRelease(e,n){const{preRelease:s}=e,{preRelease:t}=n;if(s===void 0&&t)return 1;if(s&&t===void 0)return-1;if(s===void 0&&t===void 0)return 0;for(let a=0,d=s.length;a<=d;a++){const m=s[a],p=t[a];if(m!==p)return m===void 0&&p===void 0?0:m?p?compareAtom(m,p):-1:1}return 0}function compareVersion(e,n){return compareAtom(e.major,n.major)||compareAtom(e.minor,n.minor)||compareAtom(e.patch,n.patch)||comparePreRelease(e,n)}function eq(e,n){return e.version===n.version}function compare(e,n){switch(e.operator){case"":case"=":return eq(e,n);case">":return compareVersion(e,n)<0;case">=":return eq(e,n)||compareVersion(e,n)<0;case"<":return compareVersion(e,n)>0;case"<=":return eq(e,n)||compareVersion(e,n)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,n){if(!e)return!1;const a=parseRange(n).split(" ").map(P=>parseComparatorString(P)).join(" ").split(/\s+/).map(P=>parseGTE0(P)),d=extractComparator(e);if(!d)return!1;const[,m,,p,E,y,$]=d,T={operator:m,version:combineVersion(p,E,y,$),major:p,minor:E,patch:y,preRelease:$?.split(".")};for(const P of a){const k=extractComparator(P);if(!k)return!1;const[,H,,D,U,F,j]=k,Q={operator:H,version:combineVersion(D,U,F,j),major:D,minor:U,patch:F,preRelease:j?.split(".")};if(!compare(Q,T))return!1}return!0}function formatShare(e,n,s,t){let a;"get"in e?a=e.get:"lib"in e?a=()=>Promise.resolve(e.lib):a=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${s}'!`)}),e.strategy&&warn('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var d,m,p;return polyfills._extends({deps:[],useIn:[],from:n,loading:null},e,{shareConfig:polyfills._extends({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:a,loaded:e?.loaded||"lib"in e?!0:void 0,version:(d=e.version)!=null?d:"0",scope:Array.isArray(e.scope)?e.scope:[(m=e.scope)!=null?m:"default"],strategy:((p=e.strategy)!=null?p:t)||"version-first"})}function formatShareConfigs(e,n){const s=n.shared||{},t=n.name,a=Object.keys(s).reduce((m,p)=>{const E=arrayOptions(s[p]);return m[p]=m[p]||[],E.forEach(y=>{m[p].push(formatShare(y,t,p,n.shareStrategy))}),m},{}),d=polyfills._extends({},e.shared);return Object.keys(a).forEach(m=>{d[m]?a[m].forEach(p=>{d[m].find(y=>y.version===p.version)||d[m].push(p)}):d[m]=a[m]}),{shared:d,shareInfos:a}}function versionLt(e,n){const s=t=>{if(!Number.isNaN(Number(t))){const d=t.split(".");let m=t;for(let p=0;p<3-d.length;p++)m+=".0";return m}return t};return!!satisfy(s(e),`<=${s(n)}`)}const findVersion=(e,n)=>{const s=n||function(t,a){return versionLt(t,a)};return Object.keys(e).reduce((t,a)=>!t||s(t,a)||t==="0"?a:t,0)},isLoaded=e=>!!e.loaded||typeof e.lib=="function",isLoading=e=>!!e.loading;function findSingletonVersionOrderByVersion(e,n,s){const t=e[n][s],a=function(d,m){return!isLoaded(t[d])&&versionLt(d,m)};return findVersion(e[n][s],a)}function findSingletonVersionOrderByLoaded(e,n,s){const t=e[n][s],a=function(d,m){const p=E=>isLoaded(E)||isLoading(E);return p(t[m])?p(t[d])?!!versionLt(d,m):!0:p(t[d])?!1:versionLt(d,m)};return findVersion(e[n][s],a)}function getFindShareFunction(e){return e==="loaded-first"?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,n,s,t){if(!e)return;const{shareConfig:a,scope:d=DEFAULT_SCOPE,strategy:m}=s,p=Array.isArray(d)?d:[d];for(const E of p)if(a&&e[E]&&e[E][n]){const{requiredVersion:y}=a,T=getFindShareFunction(m)(e,E,n),P=()=>{if(a.singleton){if(typeof y=="string"&&!satisfy(T,y)){const D=`Version ${T} from ${T&&e[E][n][T].from} of shared singleton module ${n} does not satisfy the requirement of ${s.from} which needs ${y})`;a.strictVersion?error(D):warn(D)}return e[E][n][T]}else{if(y===!1||y==="*"||satisfy(T,y))return e[E][n][T];for(const[D,U]of Object.entries(e[E][n]))if(satisfy(D,y))return U}},k={shareScopeMap:e,scope:E,pkgName:n,version:T,GlobalFederation:Global.__FEDERATION__,resolver:P};return(t.emit(k)||k).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:n,extraOptions:s,shareInfos:t}=e,a=p=>{if(!p)return;const E={};p.forEach(T=>{E[T.version]=T});const $=findVersion(E,function(T,P){return!isLoaded(E[T])&&versionLt(T,P)});return E[$]};var d;const m=(d=s?.resolver)!=null?d:a;return Object.assign({},m(t[n]),s?.customShareInfo)}share_cjs.CurrentGlobal=CurrentGlobal;share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE;share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE;share_cjs.Global=Global;share_cjs.addGlobalSnapshot=addGlobalSnapshot;share_cjs.addUniqueItem=addUniqueItem;share_cjs.arrayOptions=arrayOptions;share_cjs.assert=assert;share_cjs.error=error;share_cjs.formatShareConfigs=formatShareConfigs;share_cjs.getBuilderId=getBuilderId;share_cjs.getFMId=getFMId;share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor;share_cjs.getGlobalFederationInstance=getGlobalFederationInstance;share_cjs.getGlobalHostPlugins=getGlobalHostPlugins;share_cjs.getGlobalShareScope=getGlobalShareScope;share_cjs.getGlobalSnapshot=getGlobalSnapshot;share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo;share_cjs.getInfoWithoutType=getInfoWithoutType;share_cjs.getPreloaded=getPreloaded;share_cjs.getRegisteredShare=getRegisteredShare;share_cjs.getRemoteEntryExports=getRemoteEntryExports;share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot;share_cjs.getTargetSharedOptions=getTargetSharedOptions;share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo;share_cjs.globalLoading=globalLoading;share_cjs.isObject=isObject;share_cjs.isPlainObject=isPlainObject;share_cjs.isPureRemoteEntry=isPureRemoteEntry;share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry;share_cjs.logger=logger;share_cjs.nativeGlobal=nativeGlobal;share_cjs.processModuleAlias=processModuleAlias;share_cjs.registerGlobalPlugins=registerGlobalPlugins;share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo;share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor;share_cjs.setGlobalFederationInstance=setGlobalFederationInstance;share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo;share_cjs.setPreloaded=setPreloaded;share_cjs.warn=warn;var index_cjs={};const RUNTIME_001="RUNTIME-001",RUNTIME_002="RUNTIME-002",RUNTIME_003="RUNTIME-003",RUNTIME_004="RUNTIME-004",RUNTIME_005="RUNTIME-005",RUNTIME_006="RUNTIME-006",RUNTIME_007="RUNTIME-007",TYPE_001="TYPE-001",getDocsUrl=e=>`https://module-federation.io/guide/troubleshooting/${e.split("-")[0].toLowerCase()}/${e}`,getShortErrorMsg=(e,n,s,t)=>{const a=[`${[n[e]]} #${e}`];return s&&a.push(`args: ${JSON.stringify(s)}`),a.push(getDocsUrl(e)),t&&a.push(`Original Error Message:
 ${t}`),a.join(`
`)};function _extends(){return _extends=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends.apply(this,arguments)}const runtimeDescMap={[RUNTIME_001]:"Failed to get remoteEntry exports.",[RUNTIME_002]:'The remote entry interface does not contain "init"',[RUNTIME_003]:"Failed to get manifest.",[RUNTIME_004]:"Failed to locate remote.",[RUNTIME_005]:"Invalid loadShareSync function call from bundler runtime",[RUNTIME_006]:"Invalid loadShareSync function call from runtime",[RUNTIME_007]:"Failed to get remote snapshot."},typeDescMap={[TYPE_001]:"Failed to generate type declaration."},errorDescMap=_extends({},runtimeDescMap,typeDescMap);index_cjs.RUNTIME_001=RUNTIME_001;index_cjs.RUNTIME_002=RUNTIME_002;index_cjs.RUNTIME_003=RUNTIME_003;index_cjs.RUNTIME_004=RUNTIME_004;index_cjs.RUNTIME_005=RUNTIME_005;index_cjs.RUNTIME_006=RUNTIME_006;index_cjs.RUNTIME_007=RUNTIME_007;index_cjs.TYPE_001=TYPE_001;index_cjs.errorDescMap=errorDescMap;index_cjs.getShortErrorMsg=getShortErrorMsg;index_cjs.runtimeDescMap=runtimeDescMap;index_cjs.typeDescMap=typeDescMap;(function(e){var n=polyfills_cjs$1,s=index_cjs$1,t=share_cjs,a=index_cjs;function d(h,r){for(const o of h){const i=r.startsWith(o.name);let l=r.replace(o.name,"");if(i){if(l.startsWith("/")){const c=o.name;return l=`.${l}`,{pkgNameOrAlias:c,expose:l,remote:o}}else if(l==="")return{pkgNameOrAlias:o.name,expose:".",remote:o}}const _=o.alias&&r.startsWith(o.alias);let u=o.alias&&r.replace(o.alias,"");if(o.alias&&_){if(u&&u.startsWith("/")){const c=o.alias;return u=`.${u}`,{pkgNameOrAlias:c,expose:u,remote:o}}else if(u==="")return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}function m(h,r){for(const o of h)if(r===o.name||o.alias&&r===o.alias)return o}function p(h,r){const o=t.getGlobalHostPlugins();return o.length>0&&o.forEach(i=>{h?.find(l=>l.name!==i.name)&&h.push(i)}),h&&h.length>0&&h.forEach(i=>{r.forEach(l=>{l.applyPlugin(i)})}),h}async function E({entry:h,remoteEntryExports:r}){return new Promise((o,i)=>{try{r?o(r):typeof FEDERATION_ALLOW_NEW_FUNCTION<"u"?new Function("callbacks",`import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,i]):import(h).then(o).catch(i)}catch(l){i(l)}})}async function y({entry:h,remoteEntryExports:r}){return new Promise((o,i)=>{try{r?o(r):typeof __system_context__>"u"?System.import(h).then(o).catch(i):new Function("callbacks",`System.import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,i])}catch(l){i(l)}})}async function $({name:h,globalName:r,entry:o,loaderHook:i}){const{entryExports:l}=t.getRemoteEntryExports(h,r);return l||s.loadScript(o,{attrs:{},createScriptHook:(_,u)=>{const c=i.lifecycle.createScript.emit({url:_,attrs:u});if(c&&(c instanceof HTMLScriptElement||"script"in c||"timeout"in c))return c}}).then(()=>{const{remoteEntryKey:_,entryExports:u}=t.getRemoteEntryExports(h,r);return t.assert(u,a.getShortErrorMsg(a.RUNTIME_001,a.runtimeDescMap,{remoteName:h,remoteEntryUrl:o,remoteEntryKey:_})),u}).catch(_=>{throw _})}async function T({remoteInfo:h,remoteEntryExports:r,loaderHook:o}){const{entry:i,entryGlobalName:l,name:_,type:u}=h;switch(u){case"esm":case"module":return E({entry:i,remoteEntryExports:r});case"system":return y({entry:i,remoteEntryExports:r});default:return $({entry:i,globalName:l,name:_,loaderHook:o})}}async function P({remoteInfo:h,loaderHook:r}){const{entry:o,entryGlobalName:i,name:l,type:_}=h,{entryExports:u}=t.getRemoteEntryExports(l,i);return u||s.loadScriptNode(o,{attrs:{name:l,globalName:i,type:_},loaderHook:{createScriptHook:(c,g={})=>{const b=r.lifecycle.createScript.emit({url:c,attrs:g});if(b&&"url"in b)return b}}}).then(()=>{const{remoteEntryKey:c,entryExports:g}=t.getRemoteEntryExports(l,i);return t.assert(g,a.getShortErrorMsg(a.RUNTIME_001,a.runtimeDescMap,{remoteName:l,remoteEntryUrl:o,remoteEntryKey:c})),g}).catch(c=>{throw c})}function k(h){const{entry:r,name:o}=h;return s.composeKeyWithSeparator(o,r)}async function H({origin:h,remoteEntryExports:r,remoteInfo:o}){const i=k(o);if(r)return r;if(!t.globalLoading[i]){const l=h.remoteHandler.hooks.lifecycle.loadEntry,_=h.loaderHook;t.globalLoading[i]=l.emit({loaderHook:_,remoteInfo:o,remoteEntryExports:r}).then(u=>u||(s.isBrowserEnv()?T({remoteInfo:o,remoteEntryExports:r,loaderHook:_}):P({remoteInfo:o,loaderHook:_})))}return t.globalLoading[i]}function D(h){return n._extends({},h,{entry:"entry"in h?h.entry:"",type:h.type||t.DEFAULT_REMOTE_TYPE,entryGlobalName:h.entryGlobalName||h.name,shareScope:h.shareScope||t.DEFAULT_SCOPE})}let U=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let r;try{r=await H({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch{const i=k(this.remoteInfo);r=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:H,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:t.globalLoading,uniqueKey:i})}return t.assert(r,`remoteEntryExports is undefined 
 ${s.safeToString(this.remoteInfo)}`),this.remoteEntryExports=r,this.remoteEntryExports}async get(r,o,i,l){const{loadFactory:_=!0}=i||{loadFactory:!0},u=await this.getEntry();if(!this.inited){const I=this.host.shareScopeMap,S=this.remoteInfo.shareScope||"default";I[S]||(I[S]={});const v=I[S],O=[],G={version:this.remoteInfo.version||""};Object.defineProperty(G,"shareScopeMap",{value:I,enumerable:!1});const N=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:v,remoteEntryInitOptions:G,initScope:O,remoteInfo:this.remoteInfo,origin:this.host});typeof u?.init>"u"&&t.error(a.getShortErrorMsg(a.RUNTIME_002,a.runtimeDescMap,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await u.init(N.shareScope,N.initScope,N.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(n._extends({},N,{id:r,remoteSnapshot:l,remoteEntryExports:u}))}this.lib=u,this.inited=!0;let c;c=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:u,expose:o,moduleInfo:this.remoteInfo}),c||(c=await u.get(o)),t.assert(c,`${t.getFMId(this.remoteInfo)} remote don't export ${o}.`);const g=t.processModuleAlias(this.remoteInfo.name,o),b=this.wraperFactory(c,g);return _?await b():b}wraperFactory(r,o){function i(l,_){l&&typeof l=="object"&&Object.isExtensible(l)&&!Object.getOwnPropertyDescriptor(l,Symbol.for("mf_module_id"))&&Object.defineProperty(l,Symbol.for("mf_module_id"),{value:_,enumerable:!1})}return r instanceof Promise?async()=>{const l=await r();return i(l,o),l}:()=>{const l=r();return i(l,o),l}}constructor({remoteInfo:r,host:o}){this.inited=!1,this.lib=void 0,this.remoteInfo=r,this.host=o}};class F{on(r){typeof r=="function"&&this.listeners.add(r)}once(r){const o=this;this.on(function i(...l){return o.remove(i),r.apply(null,l)})}emit(...r){let o;return this.listeners.size>0&&this.listeners.forEach(i=>{o=i(...r)}),o}remove(r){this.listeners.delete(r)}removeAll(){this.listeners.clear()}constructor(r){this.type="",this.listeners=new Set,r&&(this.type=r)}}class j extends F{emit(...r){let o;const i=Array.from(this.listeners);if(i.length>0){let l=0;const _=u=>u===!1?!1:l<i.length?Promise.resolve(i[l++].apply(null,r)).then(_):u;o=_()}return Promise.resolve(o)}}function Q(h,r){if(!t.isObject(r))return!1;if(h!==r){for(const o in h)if(!(o in r))return!1}return!0}class q extends F{emit(r){t.isObject(r)||t.error(`The data for the "${this.type}" hook should be an object.`);for(const o of this.listeners)try{const i=o(r);if(Q(r,i))r=i;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(i){t.warn(i),this.onerror(i)}return r}constructor(r){super(),this.onerror=t.error,this.type=r}}class M extends F{emit(r){t.isObject(r)||t.error(`The response data for the "${this.type}" hook must be an object.`);const o=Array.from(this.listeners);if(o.length>0){let i=0;const l=u=>(t.warn(u),this.onerror(u),r),_=u=>{if(Q(r,u)){if(r=u,i<o.length)try{return Promise.resolve(o[i++](r)).then(_,l)}catch(c){return l(c)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return r};return Promise.resolve(_(r))}return Promise.resolve(r)}constructor(r){super(),this.onerror=t.error,this.type=r}}class X{applyPlugin(r){t.assert(t.isPlainObject(r),"Plugin configuration is invalid.");const o=r.name;t.assert(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=r,Object.keys(this.lifecycle).forEach(i=>{const l=r[i];l&&this.lifecycle[i].on(l)}))}removePlugin(r){t.assert(r,"A name is required.");const o=this.registerPlugins[r];t.assert(o,`The plugin "${r}" is not registered.`),Object.keys(o).forEach(i=>{i!=="name"&&this.lifecycle[i].remove(o[i])})}inherit({lifecycle:r,registerPlugins:o}){Object.keys(r).forEach(i=>{t.assert(!this.lifecycle[i],`The hook "${i}" has a conflict and cannot be inherited.`),this.lifecycle[i]=r[i]}),Object.keys(o).forEach(i=>{t.assert(!this.registerPlugins[i],`The plugin "${i}" has a conflict and cannot be inherited.`),this.applyPlugin(o[i])})}constructor(r){this.registerPlugins={},this.lifecycle=r,this.lifecycleKeys=Object.keys(r)}}function J(h){return n._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},h)}function ee(h,r){return r.map(o=>{const i=m(h,o.nameOrAlias);return t.assert(i,`Unable to preload ${o.nameOrAlias} as it is not included in ${!i&&s.safeToString({remoteInfo:i,remotes:h})}`),{remote:i,preloadConfig:J(o)}})}function ae(h){return h?h.map(r=>r==="."?r:r.startsWith("./")?r.replace("./",""):r):[]}function ne(h,r,o,i=!0){const{cssAssets:l,jsAssetsWithoutEntry:_,entryAssets:u}=o;if(r.options.inBrowser){if(u.forEach(c=>{const{moduleInfo:g}=c,b=r.moduleCache.get(h.name);H(b?{origin:r,remoteInfo:g,remoteEntryExports:b.remoteEntryExports}:{origin:r,remoteInfo:g,remoteEntryExports:void 0})}),i){const c={rel:"preload",as:"style"};l.forEach(g=>{const{link:b,needAttach:R}=s.createLink({url:g,cb:()=>{},attrs:c,createLinkHook:(I,S)=>{const v=r.loaderHook.lifecycle.createLink.emit({url:I,attrs:S});if(v instanceof HTMLLinkElement)return v}});R&&document.head.appendChild(b)})}else{const c={rel:"stylesheet",type:"text/css"};l.forEach(g=>{const{link:b,needAttach:R}=s.createLink({url:g,cb:()=>{},attrs:c,createLinkHook:(I,S)=>{const v=r.loaderHook.lifecycle.createLink.emit({url:I,attrs:S});if(v instanceof HTMLLinkElement)return v},needDeleteLink:!1});R&&document.head.appendChild(b)})}if(i){const c={rel:"preload",as:"script"};_.forEach(g=>{const{link:b,needAttach:R}=s.createLink({url:g,cb:()=>{},attrs:c,createLinkHook:(I,S)=>{const v=r.loaderHook.lifecycle.createLink.emit({url:I,attrs:S});if(v instanceof HTMLLinkElement)return v}});R&&document.head.appendChild(b)})}else{const c={fetchpriority:"high",type:h?.type==="module"?"module":"text/javascript"};_.forEach(g=>{const{script:b,needAttach:R}=s.createScript({url:g,cb:()=>{},attrs:c,createScriptHook:(I,S)=>{const v=r.loaderHook.lifecycle.createScript.emit({url:I,attrs:S});if(v instanceof HTMLScriptElement)return v},needDeleteScript:!0});R&&document.head.appendChild(b)})}}}function oe(h,r){const o=t.getRemoteEntryInfoFromSnapshot(r);o.url||t.error(`The attribute remoteEntry of ${h.name} must not be undefined.`);let i=s.getResourceUrl(r,o.url);!s.isBrowserEnv()&&!i.startsWith("http")&&(i=`https:${i}`),h.type=o.type,h.entryGlobalName=o.globalName,h.entry=i,h.version=r.version,h.buildVersion=r.buildVersion}function le(){return{name:"snapshot-plugin",async afterResolve(h){const{remote:r,pkgNameOrAlias:o,expose:i,origin:l,remoteInfo:_}=h;if(!t.isRemoteInfoWithEntry(r)||!t.isPureRemoteEntry(r)){const{remoteSnapshot:u,globalSnapshot:c}=await l.snapshotHandler.loadRemoteSnapshotInfo(r);oe(_,u);const g={remote:r,preloadConfig:{nameOrAlias:o,exposes:[i],resourceCategory:"sync",share:!1,depsRemote:!1}},b=await l.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:l,preloadOptions:g,remoteInfo:_,remote:r,remoteSnapshot:u,globalSnapshot:c});return b&&ne(_,l,b,!1),n._extends({},h,{remoteSnapshot:u})}return h}}}function ce(h){const r=h.split(":");return r.length===1?{name:r[0],version:void 0}:r.length===2?{name:r[0],version:r[1]}:{name:r[1],version:r[2]}}function se(h,r,o,i,l={},_){const u=t.getFMId(r),{value:c}=t.getInfoWithoutType(h,u),g=_||c;if(g&&!s.isManifestProvider(g)&&(o(g,r,i),g.remotesInfo)){const b=Object.keys(g.remotesInfo);for(const R of b){if(l[R])continue;l[R]=!0;const I=ce(R),S=g.remotesInfo[R];se(h,{name:I.name,version:S.matchedVersion},o,!1,l,void 0)}}}function ue(h,r,o,i,l){const _=[],u=[],c=[],g=new Set,b=new Set,{options:R}=h,{preloadConfig:I}=r,{depsRemote:S}=I;if(se(i,o,(N,A,C)=>{let w;if(C)w=I;else if(Array.isArray(S)){const K=S.find(Y=>Y.nameOrAlias===A.name||Y.nameOrAlias===A.alias);if(!K)return;w=J(K)}else if(S===!0)w=I;else return;const x=s.getResourceUrl(N,t.getRemoteEntryInfoFromSnapshot(N).url);x&&c.push({name:A.name,moduleInfo:{name:A.name,entry:x,type:"remoteEntryType"in N?N.remoteEntryType:"global",entryGlobalName:"globalName"in N?N.globalName:A.name,shareScope:"",version:"version"in N?N.version:void 0},url:x});let B="modules"in N?N.modules:[];const W=ae(w.exposes);if(W.length&&"modules"in N){var Z;B=N==null||(Z=N.modules)==null?void 0:Z.reduce((K,Y)=>(W?.indexOf(Y.moduleName)!==-1&&K.push(Y),K),[])}function V(K){const Y=K.map(z=>s.getResourceUrl(N,z));return w.filter?Y.filter(w.filter):Y}if(B){const K=B.length;for(let Y=0;Y<K;Y++){const z=B[Y],re=`${A.name}/${z.moduleName}`;h.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:z.moduleName==="."?A.name:re,name:A.name,remoteSnapshot:N,preloadConfig:w,remote:A,origin:h}),!t.getPreloaded(re)&&(w.resourceCategory==="all"?(_.push(...V(z.assets.css.async)),_.push(...V(z.assets.css.sync)),u.push(...V(z.assets.js.async)),u.push(...V(z.assets.js.sync))):(w.resourceCategory="sync")&&(_.push(...V(z.assets.css.sync)),u.push(...V(z.assets.js.sync))),t.setPreloaded(re))}}},!0,{},l),l.shared){const N=(A,C)=>{const w=t.getRegisteredShare(h.shareScopeMap,C.sharedName,A,h.sharedHandler.hooks.lifecycle.resolveShare);w&&typeof w.lib=="function"&&(C.assets.js.sync.forEach(x=>{g.add(x)}),C.assets.css.sync.forEach(x=>{b.add(x)}))};l.shared.forEach(A=>{var C;const w=(C=R.shared)==null?void 0:C[A.sharedName];if(!w)return;const x=A.version?w.find(W=>W.version===A.version):w;if(!x)return;t.arrayOptions(x).forEach(W=>{N(W,A)})})}const O=u.filter(N=>!g.has(N));return{cssAssets:_.filter(N=>!b.has(N)),jsAssetsWithoutEntry:O,entryAssets:c}}const de=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(h){const{origin:r,preloadOptions:o,remoteInfo:i,remote:l,globalSnapshot:_,remoteSnapshot:u}=h;return t.isRemoteInfoWithEntry(l)&&t.isPureRemoteEntry(l)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:l.name,url:l.entry,moduleInfo:{name:i.name,entry:l.entry,type:i.type||"global",entryGlobalName:"",shareScope:""}}]}:(oe(i,u),ue(r,o,i,_,u))}}};function ie(h,r){const o=t.getGlobalSnapshotInfoByModuleInfo({name:r.options.name,version:r.options.version}),i=o&&"remotesInfo"in o&&o.remotesInfo&&t.getInfoWithoutType(o.remotesInfo,h.name).value;return i&&i.matchedVersion?{hostGlobalSnapshot:o,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:i.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:"version"in h?h.version:void 0})}}class fe{async loadSnapshot(r){const{options:o}=this.HostInstance,{hostGlobalSnapshot:i,remoteSnapshot:l,globalSnapshot:_}=this.getGlobalRemoteInfo(r),{remoteSnapshot:u,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:r,hostGlobalSnapshot:i,remoteSnapshot:l,globalSnapshot:_});return{remoteSnapshot:u,globalSnapshot:c}}async loadRemoteSnapshotInfo(r){const{options:o}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:o,moduleInfo:r});let i=t.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});i||(i={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},t.addGlobalSnapshot({[this.HostInstance.options.name]:i})),i&&"remotesInfo"in i&&!t.getInfoWithoutType(i.remotesInfo,r.name).value&&("version"in r||"entry"in r)&&(i.remotesInfo=n._extends({},i?.remotesInfo,{[r.name]:{matchedVersion:"version"in r?r.version:r.entry}}));const{hostGlobalSnapshot:l,remoteSnapshot:_,globalSnapshot:u}=this.getGlobalRemoteInfo(r),{remoteSnapshot:c,globalSnapshot:g}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:r,hostGlobalSnapshot:l,remoteSnapshot:_,globalSnapshot:u});let b,R;if(c)if(s.isManifestProvider(c)){const I=s.isBrowserEnv()?c.remoteEntry:c.ssrRemoteEntry||c.remoteEntry||"",S=await this.getManifestJson(I,r,{}),v=t.setGlobalSnapshotInfoByModuleInfo(n._extends({},r,{entry:I}),S);b=S,R=v}else{const{remoteSnapshot:I}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,remoteSnapshot:c,from:"global"});b=I,R=g}else if(t.isRemoteInfoWithEntry(r)){const I=await this.getManifestJson(r.entry,r,{}),S=t.setGlobalSnapshotInfoByModuleInfo(r,I),{remoteSnapshot:v}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,remoteSnapshot:I,from:"global"});b=v,R=S}else t.error(a.getShortErrorMsg(a.RUNTIME_007,a.runtimeDescMap,{hostName:r.name,hostVersion:r.version,globalSnapshot:JSON.stringify(g)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:o,moduleInfo:r,remoteSnapshot:b}),{remoteSnapshot:b,globalSnapshot:R}}getGlobalRemoteInfo(r){return ie(r,this.HostInstance)}async getManifestJson(r,o,i){const l=async()=>{let u=this.manifestCache.get(r);if(u)return u;try{let c=await this.loaderHook.lifecycle.fetch.emit(r,{});return(!c||!(c instanceof Response))&&(c=await fetch(r,{})),u=await c.json(),t.assert(u.metaData&&u.exposes&&u.shared,`${r} is not a federation manifest`),this.manifestCache.set(r,u),u}catch(c){delete this.manifestLoading[r],t.error(a.getShortErrorMsg(a.RUNTIME_003,a.runtimeDescMap,{manifestUrl:r,moduleName:o.name},`${c}`))}},_=async()=>{const u=await l(),c=s.generateSnapshotFromManifest(u,{version:r}),{remoteSnapshot:g}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:o,manifestJson:u,remoteSnapshot:c,manifestUrl:r,from:"manifest"});return g};return this.manifestLoading[r]||(this.manifestLoading[r]=_().then(u=>u)),this.manifestLoading[r]}constructor(r){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new X({beforeLoadRemoteSnapshot:new j("beforeLoadRemoteSnapshot"),loadSnapshot:new M("loadGlobalSnapshot"),loadRemoteSnapshot:new M("loadRemoteSnapshot"),afterLoadSnapshot:new M("afterLoadSnapshot")}),this.manifestLoading=t.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=r,this.loaderHook=r.loaderHook}}class he{registerShared(r,o){const{shareInfos:i,shared:l}=t.formatShareConfigs(r,o);return Object.keys(i).forEach(u=>{i[u].forEach(g=>{!t.getRegisteredShare(this.shareScopeMap,u,g,this.hooks.lifecycle.resolveShare)&&g&&g.lib&&this.setShared({pkgName:u,lib:g.lib,get:g.get,loaded:!0,shared:g,from:o.name})})}),{shareInfos:i,shared:l}}async loadShare(r,o){const{host:i}=this,l=t.getTargetSharedOptions({pkgName:r,extraOptions:o,shareInfos:i.options.shared});l?.scope&&await Promise.all(l.scope.map(async b=>{await Promise.all(this.initializeSharing(b,{strategy:l.strategy}))}));const _=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:r,shareInfo:l,shared:i.options.shared,origin:i}),{shareInfo:u}=_;t.assert(u,`Cannot find ${r} Share in the ${i.options.name}. Please ensure that the ${r} Share parameters have been injected`);const c=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare),g=b=>{b.useIn||(b.useIn=[]),t.addUniqueItem(b.useIn,i.options.name)};if(c&&c.lib)return g(c),c.lib;if(c&&c.loading&&!c.loaded){const b=await c.loading;return c.loaded=!0,c.lib||(c.lib=b),g(c),b}else if(c){const R=(async()=>{const I=await c.get();u.lib=I,u.loaded=!0,g(u);const S=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare);return S&&(S.lib=I,S.loaded=!0),I})();return this.setShared({pkgName:r,loaded:!1,shared:c,from:i.options.name,lib:null,loading:R}),R}else{if(o?.customShareInfo)return!1;const R=(async()=>{const I=await u.get();u.lib=I,u.loaded=!0,g(u);const S=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare);return S&&(S.lib=I,S.loaded=!0),I})();return this.setShared({pkgName:r,loaded:!1,shared:u,from:i.options.name,lib:null,loading:R}),R}}initializeSharing(r=t.DEFAULT_SCOPE,o){const{host:i}=this,l=o?.from,_=o?.strategy;let u=o?.initScope;const c=[];if(l!=="build"){const{initTokens:O}=this;u||(u=[]);let G=O[r];if(G||(G=O[r]={from:this.host.name}),u.indexOf(G)>=0)return c;u.push(G)}const g=this.shareScopeMap,b=i.options.name;g[r]||(g[r]={});const R=g[r],I=(O,G)=>{var N;const{version:A,eager:C}=G;R[O]=R[O]||{};const w=R[O],x=w[A],B=!!(x&&(x.eager||(N=x.shareConfig)!=null&&N.eager));(!x||x.strategy!=="loaded-first"&&!x.loaded&&(!C!=!B?C:b>x.from))&&(w[A]=G)},S=O=>O&&O.init&&O.init(g[r],u),v=async O=>{const{module:G}=await i.remoteHandler.getRemoteModuleAndOptions({id:O});if(G.getEntry){let N;try{N=await G.getEntry()}catch(A){N=await i.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:O,error:A,from:"runtime",lifecycle:"beforeLoadShare",origin:i})}G.inited||(await S(N),G.inited=!0)}};return Object.keys(i.options.shared).forEach(O=>{i.options.shared[O].forEach(N=>{N.scope.includes(r)&&I(O,N)})}),(i.options.shareStrategy==="version-first"||_==="version-first")&&i.options.remotes.forEach(O=>{O.shareScope===r&&c.push(v(O.name))}),c}loadShareSync(r,o){const{host:i}=this,l=t.getTargetSharedOptions({pkgName:r,extraOptions:o,shareInfos:i.options.shared});l?.scope&&l.scope.forEach(c=>{this.initializeSharing(c,{strategy:l.strategy})});const _=t.getRegisteredShare(this.shareScopeMap,r,l,this.hooks.lifecycle.resolveShare),u=c=>{c.useIn||(c.useIn=[]),t.addUniqueItem(c.useIn,i.options.name)};if(_){if(typeof _.lib=="function")return u(_),_.loaded||(_.loaded=!0,_.from===i.options.name&&(l.loaded=!0)),_.lib;if(typeof _.get=="function"){const c=_.get();if(!(c instanceof Promise))return u(_),this.setShared({pkgName:r,loaded:!0,from:i.options.name,lib:c,shared:_}),c}}if(l.lib)return l.loaded||(l.loaded=!0),l.lib;if(l.get){const c=l.get();if(c instanceof Promise){const g=o?.from==="build"?a.RUNTIME_005:a.RUNTIME_006;throw new Error(a.getShortErrorMsg(g,a.runtimeDescMap,{hostName:i.options.name,sharedPkgName:r}))}return l.lib=c,this.setShared({pkgName:r,loaded:!0,from:i.options.name,lib:l.lib,shared:l}),l.lib}throw new Error(a.getShortErrorMsg(a.RUNTIME_006,a.runtimeDescMap,{hostName:i.options.name,sharedPkgName:r}))}initShareScopeMap(r,o,i={}){const{host:l}=this;this.shareScopeMap[r]=o,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:o,options:l.options,origin:l,scopeName:r,hostShareScopeMap:i.hostShareScopeMap})}setShared({pkgName:r,shared:o,from:i,lib:l,loading:_,loaded:u,get:c}){const{version:g,scope:b="default"}=o,R=n._object_without_properties_loose(o,["version","scope"]);(Array.isArray(b)?b:[b]).forEach(S=>{if(this.shareScopeMap[S]||(this.shareScopeMap[S]={}),this.shareScopeMap[S][r]||(this.shareScopeMap[S][r]={}),!this.shareScopeMap[S][r][g]){this.shareScopeMap[S][r][g]=n._extends({version:g,scope:["default"]},R,{lib:l,loaded:u,loading:_}),c&&(this.shareScopeMap[S][r][g].get=c);return}const v=this.shareScopeMap[S][r][g];_&&!v.loading&&(v.loading=_)})}_setGlobalShareScopeMap(r){const o=t.getGlobalShareScope(),i=r.id||r.name;i&&!o[i]&&(o[i]=this.shareScopeMap)}constructor(r){this.hooks=new X({afterResolve:new M("afterResolve"),beforeLoadShare:new M("beforeLoadShare"),loadShare:new j,resolveShare:new q("resolveShare"),initContainerShareScopeMap:new q("initContainerShareScopeMap")}),this.host=r,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(r.options)}}class pe{formatAndRegisterRemote(r,o){return(o.remotes||[]).reduce((l,_)=>(this.registerRemote(_,l,{force:!1}),l),r.remotes)}setIdToRemoteMap(r,o){const{remote:i,expose:l}=o,{name:_,alias:u}=i;if(this.idToRemoteMap[r]={name:i.name,expose:l},u&&r.startsWith(_)){const c=r.replace(_,u);this.idToRemoteMap[c]={name:i.name,expose:l};return}if(u&&r.startsWith(u)){const c=r.replace(u,_);this.idToRemoteMap[c]={name:i.name,expose:l}}}async loadRemote(r,o){const{host:i}=this;try{const{loadFactory:l=!0}=o||{loadFactory:!0},{module:_,moduleOptions:u,remoteMatchInfo:c}=await this.getRemoteModuleAndOptions({id:r}),{pkgNameOrAlias:g,remote:b,expose:R,id:I,remoteSnapshot:S}=c,v=await _.get(I,R,o,S),O=await this.hooks.lifecycle.onLoad.emit({id:I,pkgNameOrAlias:g,expose:R,exposeModule:l?v:void 0,exposeModuleFactory:l?void 0:v,remote:b,options:u,moduleInstance:_,origin:i});return this.setIdToRemoteMap(r,c),typeof O=="function"?O:v}catch(l){const{from:_="runtime"}=o||{from:"runtime"},u=await this.hooks.lifecycle.errorLoadRemote.emit({id:r,error:l,from:_,lifecycle:"onLoad",origin:i});if(!u)throw l;return u}}async preloadRemote(r){const{host:o}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:r,options:o.options,origin:o});const i=ee(o.options.remotes,r);await Promise.all(i.map(async l=>{const{remote:_}=l,u=D(_),{globalSnapshot:c,remoteSnapshot:g}=await o.snapshotHandler.loadRemoteSnapshotInfo(_),b=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:l,remote:_,remoteInfo:u,globalSnapshot:c,remoteSnapshot:g});b&&ne(u,o,b)}))}registerRemotes(r,o){const{host:i}=this;r.forEach(l=>{this.registerRemote(l,i.options.remotes,{force:o?.force})})}async getRemoteModuleAndOptions(r){const{host:o}=this,{id:i}=r;let l;try{l=await this.hooks.lifecycle.beforeRequest.emit({id:i,options:o.options,origin:o})}catch(O){if(l=await this.hooks.lifecycle.errorLoadRemote.emit({id:i,options:o.options,origin:o,from:"runtime",error:O,lifecycle:"beforeRequest"}),!l)throw O}const{id:_}=l,u=d(o.options.remotes,_);t.assert(u,a.getShortErrorMsg(a.RUNTIME_004,a.runtimeDescMap,{hostName:o.options.name,requestId:_}));const{remote:c}=u,g=D(c),b=await o.sharedHandler.hooks.lifecycle.afterResolve.emit(n._extends({id:_},u,{options:o.options,origin:o,remoteInfo:g})),{remote:R,expose:I}=b;t.assert(R&&I,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${_}.`);let S=o.moduleCache.get(R.name);const v={host:o,remoteInfo:g};return S||(S=new U(v),o.moduleCache.set(R.name,S)),{module:S,moduleOptions:v,remoteMatchInfo:b}}registerRemote(r,o,i){const{host:l}=this,_=()=>{if(r.alias){const c=o.find(g=>{var b;return r.alias&&(g.name.startsWith(r.alias)||((b=g.alias)==null?void 0:b.startsWith(r.alias)))});t.assert(!c,`The alias ${r.alias} of remote ${r.name} is not allowed to be the prefix of ${c&&c.name} name or alias`)}"entry"in r&&s.isBrowserEnv()&&!r.entry.startsWith("http")&&(r.entry=new URL(r.entry,window.location.origin).href),r.shareScope||(r.shareScope=t.DEFAULT_SCOPE),r.type||(r.type=t.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:r,origin:l});const u=o.find(c=>c.name===r.name);if(!u)_(),o.push(r),this.hooks.lifecycle.registerRemote.emit({remote:r,origin:l});else{const c=[`The remote "${r.name}" is already registered.`,i?.force?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];i?.force&&(this.removeRemote(u),_(),o.push(r),this.hooks.lifecycle.registerRemote.emit({remote:r,origin:l})),s.warn(c.join(" "))}}removeRemote(r){try{const{host:i}=this,{name:l}=r,_=i.options.remotes.findIndex(c=>c.name===l);_!==-1&&i.options.remotes.splice(_,1);const u=i.moduleCache.get(r.name);if(u){const c=u.remoteInfo,g=c.entryGlobalName;if(t.CurrentGlobal[g]){var o;(o=Object.getOwnPropertyDescriptor(t.CurrentGlobal,g))!=null&&o.configurable?delete t.CurrentGlobal[g]:t.CurrentGlobal[g]=void 0}const b=k(u.remoteInfo);t.globalLoading[b]&&delete t.globalLoading[b],i.snapshotHandler.manifestCache.delete(c.entry);let R=c.buildVersion?s.composeKeyWithSeparator(c.name,c.buildVersion):c.name;const I=t.CurrentGlobal.__FEDERATION__.__INSTANCES__.findIndex(v=>c.buildVersion?v.options.id===R:v.name===R);if(I!==-1){const v=t.CurrentGlobal.__FEDERATION__.__INSTANCES__[I];R=v.options.id||R;const O=t.getGlobalShareScope();let G=!0;const N=[];Object.keys(O).forEach(A=>{const C=O[A];C&&Object.keys(C).forEach(w=>{const x=C[w];x&&Object.keys(x).forEach(B=>{const W=x[B];W&&Object.keys(W).forEach(Z=>{const V=W[Z];V&&typeof V=="object"&&V.from===c.name&&(V.loaded||V.loading?(V.useIn=V.useIn.filter(K=>K!==c.name),V.useIn.length?G=!1:N.push([A,w,B,Z])):N.push([A,w,B,Z]))})})})}),G&&(v.shareScopeMap={},delete O[R]),N.forEach(([A,C,w,x])=>{var B,W,Z;(Z=O[A])==null||(W=Z[C])==null||(B=W[w])==null||delete B[x]}),t.CurrentGlobal.__FEDERATION__.__INSTANCES__.splice(I,1)}const{hostGlobalSnapshot:S}=ie(r,i);if(S){const v=S&&"remotesInfo"in S&&S.remotesInfo&&t.getInfoWithoutType(S.remotesInfo,r.name).key;v&&(delete S.remotesInfo[v],t.Global.__FEDERATION__.__MANIFEST_LOADING__[v]&&delete t.Global.__FEDERATION__.__MANIFEST_LOADING__[v])}i.moduleCache.delete(r.name)}}catch(i){t.logger.log("removeRemote fail: ",i)}}constructor(r){this.hooks=new X({beforeRegisterRemote:new q("beforeRegisterRemote"),registerRemote:new q("registerRemote"),beforeRequest:new M("beforeRequest"),onLoad:new j("onLoad"),handlePreloadModule:new F("handlePreloadModule"),errorLoadRemote:new j("errorLoadRemote"),beforePreloadRemote:new j("beforePreloadRemote"),generatePreloadAssets:new j("generatePreloadAssets"),afterPreloadRemote:new j,loadEntry:new j}),this.host=r,this.idToRemoteMap={}}}class te{initOptions(r){this.registerPlugins(r.plugins);const o=this.formatOptions(this.options,r);return this.options=o,o}async loadShare(r,o){return this.sharedHandler.loadShare(r,o)}loadShareSync(r,o){return this.sharedHandler.loadShareSync(r,o)}initializeSharing(r=t.DEFAULT_SCOPE,o){return this.sharedHandler.initializeSharing(r,o)}initRawContainer(r,o,i){const l=D({name:r,entry:o}),_=new U({host:this,remoteInfo:l});return _.remoteEntryExports=i,this.moduleCache.set(r,_),_}async loadRemote(r,o){return this.remoteHandler.loadRemote(r,o)}async preloadRemote(r){return this.remoteHandler.preloadRemote(r)}initShareScopeMap(r,o,i={}){this.sharedHandler.initShareScopeMap(r,o,i)}formatOptions(r,o){const{shared:i}=t.formatShareConfigs(r,o),{userOptions:l,options:_}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:o,options:r,shareInfo:i}),u=this.remoteHandler.formatAndRegisterRemote(_,l),{shared:c}=this.sharedHandler.registerShared(_,l),g=[..._.plugins];l.plugins&&l.plugins.forEach(R=>{g.includes(R)||g.push(R)});const b=n._extends({},r,o,{plugins:g,remotes:u,shared:c});return this.hooks.lifecycle.init.emit({origin:this,options:b}),b}registerPlugins(r){const o=p(r,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce((i,l)=>(l&&i&&!i.find(_=>_.name===l.name)&&i.push(l),i),o||[])}registerRemotes(r,o){return this.remoteHandler.registerRemotes(r,o)}constructor(r){this.hooks=new X({beforeInit:new q("beforeInit"),init:new F,beforeInitContainer:new M("beforeInitContainer"),initContainer:new M("initContainer")}),this.version="0.8.2",this.moduleCache=new Map,this.loaderHook=new X({getModuleInfo:new F,createScript:new F,createLink:new F,fetch:new j,loadEntryError:new j,getModuleFactory:new j}),this.bridgeHook=new X({beforeBridgeRender:new F,afterBridgeRender:new F,beforeBridgeDestroy:new F,afterBridgeDestroy:new F});const o={id:t.getBuilderId(),name:r.name,plugins:[le(),de()],remotes:[],shared:{},inBrowser:s.isBrowserEnv()};this.name=r.name,this.options=o,this.snapshotHandler=new fe(this),this.sharedHandler=new he(this),this.remoteHandler=new pe(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...o.plugins,...r.plugins||[]]),this.options=this.formatOptions(o,r)}}let L=null;function _e(h){const r=t.getGlobalFederationInstance(h.name,h.version);if(r)return r.initOptions(h),L||(L=r),r;{const o=t.getGlobalFederationConstructor()||te;return L=new o(h),t.setGlobalFederationInstance(L),L}}function me(...h){return t.assert(L,"Please call init first"),L.loadRemote.apply(L,h)}function ge(...h){return t.assert(L,"Please call init first"),L.loadShare.apply(L,h)}function Ee(...h){return t.assert(L,"Please call init first"),L.loadShareSync.apply(L,h)}function ye(...h){return t.assert(L,"Please call init first"),L.preloadRemote.apply(L,h)}function be(...h){return t.assert(L,"Please call init first"),L.registerRemotes.apply(L,h)}function Se(...h){return t.assert(L,"Please call init first"),L.registerPlugins.apply(L,h)}function Re(){return L}t.setGlobalFederationConstructor(te),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return s.loadScriptNode}}),e.registerGlobalPlugins=t.registerGlobalPlugins,e.FederationHost=te,e.Module=U,e.getInstance=Re,e.getRemoteEntry=H,e.getRemoteInfo=D,e.init=_e,e.loadRemote=me,e.loadShare=ge,e.loadShareSync=Ee,e.preloadRemote=ye,e.registerPlugins=Se,e.registerRemotes=be})(index_cjs$2);let initResolve,initReject;const initPromise=new Promise((e,n)=>{initResolve=e,initReject=n});var decide__mf_v__runtimeInit__mf_v__={initPromise,initResolve,initReject};export{decide__mf_v__runtimeInit__mf_v__ as d,index_cjs$2 as i};
