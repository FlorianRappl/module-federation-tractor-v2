{"version":3,"file":"315.js","sources":["webpack://app/./src/remotes.js","webpack://app/./src/useHistory.js","webpack://app/./src/App.jsx","webpack://app/./src/Router.jsx","webpack://app/./src/bootstrap.jsx"],"sourcesContent":["import { lazy } from \"react\";\nimport {\n  registerRemotes,\n  loadRemote,\n} from \"@module-federation/enhanced/runtime\";\n\nregisterRemotes([\n  {\n    entry: process.env.DECIDE_URL,\n    name: \"decide\",\n    type: \"module\",\n  },\n  {\n    entry: process.env.CHECKOUT_URL,\n    name: \"checkout\",\n    type: \"global\",\n  },\n  {\n    entry: process.env.EXPLORE_URL,\n    name: \"explore\",\n    type: \"global\",\n  },\n]);\n\nwindow.getComponent = (id) => lazy(() => loadRemote(id));\n","import { useEffect, useState } from \"react\";\n\nfunction modifyHistory(type) {\n  const orig = history[type];\n  return function (...args) {\n    const rv = orig.apply(this, args);\n    const ev = new Event(type.toLowerCase());\n    window.dispatchEvent(ev);\n    return rv;\n  };\n}\n\nfunction navigate(route, state) {\n  history.pushState(state, \"\", route);\n}\n\nfunction scrollToTop() {\n  window.scrollTo(0, 0);\n}\n\nfunction onClick(e) {\n  let link = e.target instanceof Element && e.target.closest(\"a\");\n\n  if (\n    link &&\n    link instanceof HTMLAnchorElement &&\n    link.href &&\n    (!link.target || link.target === \"_self\") &&\n    link.origin === location.origin &&\n    !link.hasAttribute(\"download\") &&\n    e.button === 0 && // left clicks only\n    !e.metaKey && // open in new tab (mac)\n    !e.ctrlKey && // open in new tab (windows)\n    !e.altKey && // download\n    !e.shiftKey &&\n    !e.defaultPrevented\n  ) {\n    e.preventDefault();\n    navigate(link.href, {});\n  }\n}\n\nhistory.pushState = modifyHistory(\"pushState\");\nhistory.replaceState = modifyHistory(\"replaceState\");\n\nexport function useHistory() {\n  const [url, setUrl] = useState(location.pathname);\n\n  useEffect(() => {\n    function onHistory() {\n      scrollToTop();\n      setUrl(location.pathname);\n    }\n\n    window.addEventListener(\"popstate\", onHistory);\n    window.addEventListener(\"pushstate\", onHistory);\n    window.addEventListener(\"replacestate\", onHistory);\n    document.addEventListener(\"click\", onClick);\n\n    return () => {\n      window.removeEventListener(\"popstate\", onHistory);\n      window.removeEventListener(\"pushstate\", onHistory);\n      window.removeEventListener(\"replacestate\", onHistory);\n      document.removeEventListener(\"click\", onClick);\n    };\n  }, []);\n\n  return url;\n}\n","import React from \"react\";\nimport Router from \"./Router\";\n\nconst Loading = () => (\n  <div className=\"loader-frame\">\n    <span className=\"loader\" />\n  </div>\n);\n\nconst App = () => {\n  return (\n    <React.Suspense fallback={<Loading />}>\n      <Router />\n    </React.Suspense>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport { useHistory } from \"./useHistory\";\n\nconst HomePage = window.getComponent(\"explore/HomePage\");\nconst StoresPage = window.getComponent(\"explore/StoresPage\");\nconst CategoryPage = window.getComponent(\"explore/CategoryPage\");\nconst CartPage = window.getComponent(\"checkout/CartPage\");\nconst Checkout = window.getComponent(\"checkout/Checkout\");\nconst Thanks = window.getComponent(\"checkout/Thanks\");\nconst ProductPage = window.getComponent(\"decide/ProductPage\");\n\nconst Router = () => {\n  const path = useHistory();\n\n  switch (path) {\n    case \"/\":\n      return <HomePage />;\n    case \"/stores\":\n      return <StoresPage />;\n    case \"/checkout/cart\":\n      return <CartPage />;\n    case \"/checkout/checkout\":\n      return <Checkout />;\n    case \"/checkout/thanks\":\n      return <Thanks />;\n    case \"/products\":\n      return <CategoryPage />;\n  }\n\n  if (path.startsWith(\"/product/\")) {\n    const id = path.split(\"/\")[2];\n    return <ProductPage id={id} />;\n  } else if (path.startsWith(\"/products/\")) {\n    const category = path.split(\"/\")[2];\n    return <CategoryPage category={category} />;\n  }\n\n  return null;\n};\n\nexport default Router;\n","import React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport './remotes';\nimport App from \"./App\";\n\nconst root = createRoot(document.querySelector(\"#app\"));\nroot.render(<App />);\n"],"names":["registerRemotes","entry","name","type","window","getComponent","id","lazy","loadRemote","modifyHistory","orig","history","args","rv","apply","ev","Event","toLowerCase","dispatchEvent","onClick","e","link","target","Element","closest","HTMLAnchorElement","href","origin","location","hasAttribute","button","metaKey","ctrlKey","altKey","shiftKey","defaultPrevented","route","state","preventDefault","pushState","useHistory","url","setUrl","useState","pathname","useEffect","onHistory","scrollTo","addEventListener","document","removeEventListener","replaceState","Loading","className","React","fallback","Router","HomePage","StoresPage","CategoryPage","CartPage","Checkout","Thanks","ProductPage","path","startsWith","split","category","root","createRoot","querySelector","render","App"],"mappings":"qHAMA,KAAAA,eAAA,EAAgB,CACd,CACEC,MAAO,8EACPC,KAAM,SACNC,KAAM,QACR,EACA,CACEF,MAAO,gFACPC,KAAM,WACNC,KAAM,QACR,EACA,CACEF,MAAO,+EACPC,KAAM,UACNC,KAAM,QACR,EACD,EAEDC,OAAOC,YAAY,CAAG,AAACC,GAAO,KAAAC,IAAA,EAAK,IAAM,KAAAC,UAAA,EAAWF,G,mECtBpD,SAASG,EAAcN,CAAI,EACzB,IAAMO,EAAOC,OAAO,CAACR,EAAK,CAC1B,OAAO,SAAU,GAAGS,CAAI,EACtB,IAAMC,EAAKH,EAAKI,KAAK,CAAC,IAAI,CAAEF,GACtBG,EAAK,IAAIC,MAAMb,EAAKc,WAAW,IAErC,OADAb,OAAOc,aAAa,CAACH,GACdF,CACT,CACF,CAUA,SAASM,EAAQC,CAAC,EAChB,IAAIC,EAAOD,EAAEE,MAAM,YAAYC,SAAWH,EAAEE,MAAM,CAACE,OAAO,CAAC,KAE3D,GACEH,GACAA,aAAgBI,mBAChBJ,EAAKK,IAAI,EACR,EAACL,EAAKC,MAAM,EAAID,AAAgB,UAAhBA,EAAKC,MAAM,AAAW,GACvCD,EAAKM,MAAM,GAAKC,SAASD,MAAM,EAC/B,CAACN,EAAKQ,YAAY,CAAC,aACnBT,AAAa,IAAbA,EAAEU,MAAM,EACR,CAACV,EAAEW,OAAO,EACV,CAACX,EAAEY,OAAO,EACV,CAACZ,EAAEa,MAAM,EACT,CAACb,EAAEc,QAAQ,EACX,CAACd,EAAEe,gBAAgB,CACnB,KAxBcC,EAAOC,EAyBrBjB,EAAEkB,cAAc,GAzBFF,EA0BLf,EAAKK,IAAI,CA1BGW,EA0BD,CAAC,EAzBvB1B,QAAQ4B,SAAS,CAACF,EAAO,GAAID,EA0B7B,CACF,CAKO,SAASI,IACd,GAAM,CAACC,EAAKC,EAAO,CAAG,KAAAC,QAAA,EAASf,SAASgB,QAAQ,EAqBhD,MAnBA,KAAAC,SAAA,EAAU,KACR,SAASC,IAhCX1C,OAAO2C,QAAQ,CAAC,EAAG,GAkCfL,EAAOd,SAASgB,QAAQ,CAC1B,CAOA,OALAxC,OAAO4C,gBAAgB,CAAC,WAAYF,GACpC1C,OAAO4C,gBAAgB,CAAC,YAAaF,GACrC1C,OAAO4C,gBAAgB,CAAC,eAAgBF,GACxCG,SAASD,gBAAgB,CAAC,QAAS7B,GAE5B,KACLf,OAAO8C,mBAAmB,CAAC,WAAYJ,GACvC1C,OAAO8C,mBAAmB,CAAC,YAAaJ,GACxC1C,OAAO8C,mBAAmB,CAAC,eAAgBJ,GAC3CG,SAASC,mBAAmB,CAAC,QAAS/B,EACxC,CACF,EAAG,EAAE,EAEEsB,CACT,CA1BA9B,QAAQ4B,SAAS,CAAG9B,EAAc,aAClCE,QAAQwC,YAAY,CAAG1C,EAAc,e,qDCxC/B2C,EAAU,W,OACd,kBAAC,OAAIC,UAAU,c,EACb,kBAAC,QAAKA,UAAU,Q,IAYpB,KARY,WACV,OACE,kBAACC,IAAAA,QAAAA,CAAc,CAACC,SAAU,kBAACH,EAAAA,K,EACzB,kBAACI,EAAAA,CAAMA,CAAAA,MAGb,C,qDCZMC,EAAWrD,OAAOC,YAAY,CAAC,oBAC/BqD,EAAatD,OAAOC,YAAY,CAAC,sBACjCsD,EAAevD,OAAOC,YAAY,CAAC,wBACnCuD,EAAWxD,OAAOC,YAAY,CAAC,qBAC/BwD,EAAWzD,OAAOC,YAAY,CAAC,qBAC/ByD,EAAS1D,OAAOC,YAAY,CAAC,mBAC7B0D,EAAc3D,OAAOC,YAAY,CAAC,qBA+BxC,KA7Be,WACb,IAAM2D,EAAOxB,AAAAA,CAAAA,EAAAA,EAAAA,CAAAA,AAAAA,IAEb,OAAQwB,GACN,IAAK,IACH,OAAO,kBAACP,EAAAA,KACV,KAAK,UACH,OAAO,kBAACC,EAAAA,KACV,KAAK,iBACH,OAAO,kBAACE,EAAAA,KACV,KAAK,qBACH,OAAO,kBAACC,EAAAA,KACV,KAAK,mBACH,OAAO,kBAACC,EAAAA,KACV,KAAK,YACH,OAAO,kBAACH,EAAAA,KACZ,CAEA,GAAIK,EAAKC,UAAU,CAAC,aAAc,CAChC,IAAM3D,EAAK0D,EAAKE,KAAK,CAAC,IAAI,CAAC,EAAE,CAC7B,OAAO,kBAACH,EAAAA,CAAYzD,GAAIA,C,EAC1B,CAAO,GAAI0D,EAAKC,UAAU,CAAC,cAAe,CACxC,IAAME,EAAWH,EAAKE,KAAK,CAAC,IAAI,CAAC,EAAE,CACnC,OAAO,kBAACP,EAAAA,CAAaQ,SAAUA,C,EACjC,CAEA,OAAO,IACT,C,gFChCAC,AADaC,AAAAA,CAAAA,EAAAA,EAAAA,UAAAA,AAAAA,EAAWpB,SAASqB,aAAa,CAAC,SAC1CC,MAAM,CAAC,kBAACC,EAAAA,CAAGA,CAAAA,M"}