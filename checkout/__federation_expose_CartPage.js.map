{"version":3,"file":"__federation_expose_CartPage.js","sources":["webpack://checkout/./src/data/store.js","webpack://checkout/./src/js/utils.js","webpack://checkout/./src/CartPage.jsx","webpack://checkout/./src/components/Button.jsx?7d1b*","webpack://checkout/./src/components/LineItem.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst store = [];\n\nwindow.addEventListener('add-to-cart', (ev) => {\n  const { sku } = ev.detail;\n\n  const item = store.find((m) => m.sku === sku);\n\n  if (item) {\n    item.quantity++;\n  } else {\n    store.push({ sku, quantity: 1 });\n  }\n\n  window.dispatchEvent(new CustomEvent('updated-cart'));\n});\n\nwindow.addEventListener('remove-from-cart', (ev) => {\n  const { sku } = ev.detail;\n\n  const index = store.findIndex((m) => m.sku === sku);\n\n  if (index >= 0) {\n    store.splice(index, 1);\n    window.dispatchEvent(new CustomEvent('updated-cart'));\n  }\n});\n\nwindow.addEventListener('clear-cart', () => {\n  store.splice(0, store.length);\n  window.dispatchEvent(new CustomEvent('updated-cart'));\n});\n\nexport function useLineItems() {\n  const [items, setItems] = useState(store);\n\n  useEffect(() => {\n    const refresh = () => setItems([...store]);\n    window.addEventListener('updated-cart', refresh);\n    return () => {\n      window.removeEventListener('updated-cart', refresh);\n    };\n  }, []);\n\n  return items;\n}\n","export function src(image, size) {\n  return image.replace(\"[size]\", `${size}`);\n}\n\nexport function srcset(image, sizes = []) {\n  return sizes.map((size) => `${src(image, size)} ${size}w`).join(\", \");\n}\n","import * as React from 'react';\nimport LineItem from './components/LineItem';\nimport Button from './components/Button';\nimport data from './data/db.json';\nimport { useLineItems } from './data/store';\nimport './css/index.css';\n\nconst Header = window.getComponent('explore/Header');\nconst Footer = window.getComponent('explore/Footer');\nconst Recommendations = window.getComponent('explore/Recommendations');\n\nfunction convertToLineItems(items) {\n  return items.reduce((res, { sku, quantity }) => {\n    const variant = data.variants.find((p) => p.sku === sku);\n    if (variant) {\n      res.push({ ...variant, quantity, total: variant.price * quantity });\n    }\n    return res;\n  }, []);\n}\n\nconst CartPage = () => {\n  const rawLineItems = useLineItems();\n  const lineItems = convertToLineItems(rawLineItems);\n  const total = lineItems.reduce((res, { total }) => res + total, 0);\n  const skus = lineItems.map(({ sku }) => sku);\n\n  return (\n    <div data-boundary-page=\"checkout\">\n      <Header />\n      <main className=\"c_CartPage\">\n        <h2>Basket</h2>\n        <ul className=\"c_CartPage__lineItems\">\n          {lineItems.map((li, i) => (\n            <LineItem {...li} key={i} />\n          ))}\n        </ul>\n        <hr />\n        <p className=\"c_CartPage__total\">Total: {total} Ø</p>\n        <div className=\"c_CartPage__buttons\">\n          <Button href=\"/checkout/checkout\" variant=\"primary\">\n            Checkout\n          </Button>\n          <Button href=\"/\" variant=\"secondary\">\n            Continue Shopping\n          </Button>\n        </div>\n        <Recommendations skus={skus} />\n      </main>\n      <Footer />\n    </div>\n  );\n};\n\nexport default CartPage;\n","import * as React from \"react\";\n\nexport default ({\n  href,\n  type,\n  value,\n  disabled,\n  rounded,\n  className = \"\",\n  children,\n  dataId,\n  size = \"normal\",\n  variant = \"secondary\",\n  title,\n}) => {\n  const tag = href ? \"a\" : \"button\";\n  return React.createElement(\n    tag,\n    {\n      disabled,\n      href,\n      type,\n      value,\n      title,\n      \"data-id\": dataId ? dataId : undefined,\n      className: `c_Button c_Button--${variant} ${className} ${\n        rounded ? \"c_Button--rounded\" : \"\"\n      } c_Button--size-${size}`,\n    },\n    <div className=\"c_Button__inner\">{children}</div>\n  );\n};\n","import * as React from 'react';\nimport Button from './Button';\nimport { src, srcset } from '../js/utils';\n\nexport default ({ sku, id, name, quantity, total, image }) => {\n  const url = `/product/${id}?sku=${sku}`;\n\n  function submit(ev) {\n    window.dispatchEvent(\n      new CustomEvent('remove-from-cart', {\n        detail: { sku },\n      }),\n    );\n    ev.preventDefault();\n  }\n\n  return (\n    <li className=\"c_LineItem\">\n      <a href={url} className=\"c_LineItem__image\">\n        <img\n          src={src(image, 200)}\n          srcSet={srcset(image, [200, 400])}\n          sizes=\"200px\"\n          alt={name}\n          width=\"200\"\n          height=\"200\"\n        />\n      </a>\n      <div className=\"c_LineItem__details\">\n        <a href={url} className=\"c_LineItem__name\">\n          <strong>{name}</strong>\n          <br />\n          {sku}\n        </a>\n\n        <div className=\"c_LineItem__quantity\">\n          <span>{quantity}</span>\n\n          <form action=\"/checkout/cart/remove\" method=\"post\" onSubmit={submit}>\n            <input type=\"hidden\" name=\"sku\" value={sku} />\n            <Button\n              variant=\"secondary\"\n              rounded\n              type=\"submit\"\n              value=\"remove\"\n              size=\"small\"\n              title={`Remove ${name} from cart`}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" height=\"20\" width=\"20\" viewBox=\"0 0 48 48\">\n                <path\n                  fill=\"#000\"\n                  d=\"m40 5.172-16 16-16-16L5.171 8l16.001 16L5.171 40 8 42.828l16-16 16 16L42.828 40l-16-16 16-16L40 5.172Z\"\n                />\n              </svg>\n            </Button>\n          </form>\n        </div>\n        <div className=\"c_LineItem__price\">{total} Ø</div>\n      </div>\n    </li>\n  );\n};\n"],"names":["store","useLineItems","items","setItems","useState","useEffect","refresh","window","addEventListener","removeEventListener","ev","sku","detail","item","find","m","quantity","push","dispatchEvent","CustomEvent","index","findIndex","splice","length","src","image","size","replace","srcset","sizes","map","join","Header","getComponent","Footer","Recommendations","lineItems","reduce","res","variant","data","p","total","price","skus","className","li","i","LineItem","key","Button","href","type","value","disabled","rounded","children","dataId","title","React","undefined","concat","id","name","url","srcSet","alt","width","height","action","method","onSubmit","preventDefault","xmlns","fill","viewBox","d"],"mappings":"uJAEA,IAAMA,EAAQ,EAAE,CAgCT,SAASC,IACd,GAAM,CAACC,EAAOC,EAAS,CAAG,KAAAC,QAAA,EAASJ,GAUnC,MARA,KAAAK,SAAA,EAAU,KACR,IAAMC,EAAU,IAAMH,EAAS,IAAIH,EAAM,EAEzC,OADAO,OAAOC,gBAAgB,CAAC,eAAgBF,GACjC,KACLC,OAAOE,mBAAmB,CAAC,eAAgBH,EAC7C,CACF,EAAG,EAAE,EAEEJ,CACT,CA1CAK,OAAOC,gBAAgB,CAAC,cAAe,AAACE,IACtC,GAAM,CAAEC,IAAAA,CAAG,CAAE,CAAGD,EAAGE,MAAM,CAEnBC,EAAOb,EAAMc,IAAI,CAAC,AAACC,GAAMA,EAAEJ,GAAG,GAAKA,GAErCE,EACFA,EAAKG,QAAQ,GAEbhB,EAAMiB,IAAI,CAAC,CAAEN,IAAAA,EAAKK,SAAU,CAAE,GAGhCT,OAAOW,aAAa,CAAC,IAAIC,YAAY,gBACvC,GAEAZ,OAAOC,gBAAgB,CAAC,mBAAoB,AAACE,IAC3C,GAAM,CAAEC,IAAAA,CAAG,CAAE,CAAGD,EAAGE,MAAM,CAEnBQ,EAAQpB,EAAMqB,SAAS,CAAC,AAACN,GAAMA,EAAEJ,GAAG,GAAKA,GAE3CS,GAAS,IACXpB,EAAMsB,MAAM,CAACF,EAAO,GACpBb,OAAOW,aAAa,CAAC,IAAIC,YAAY,iBAEzC,GAEAZ,OAAOC,gBAAgB,CAAC,aAAc,KACpCR,EAAMsB,MAAM,CAAC,EAAGtB,EAAMuB,MAAM,EAC5BhB,OAAOW,aAAa,CAAC,IAAIC,YAAY,gBACvC,E,sBChCO,SAASK,EAAIC,CAAK,CAAEC,CAAI,EAC7B,OAAOD,EAAME,OAAO,CAAC,SAAU,CAAC,EAAED,EAAK,CAAC,CAC1C,CAEO,SAASE,EAAOH,CAAK,CAAEI,EAAQ,EAAE,EACtC,OAAOA,EAAMC,GAAG,CAAC,AAACJ,GAAS,CAAC,EAAEF,EAAIC,EAAOC,GAAM,CAAC,EAAEA,EAAK,CAAC,CAAC,EAAEK,IAAI,CAAC,KAClE,C,y6BCCA,IAAMC,EAASzB,OAAO0B,YAAY,CAAC,kBAC7BC,EAAS3B,OAAO0B,YAAY,CAAC,kBAC7BE,EAAkB5B,OAAO0B,YAAY,CAAC,0BA6C5C,WAjCiB,WAEf,IAAMG,EAXClC,AAUcD,AAAAA,CAAAA,EAAAA,EAAAA,CAAAA,AAAAA,IAVRoC,MAAM,CAAC,SAACC,CAAG,CAAE,CAALA,E,IAAO3B,EAAAA,EAAAA,GAAG,CAAEK,EAAAA,EAAAA,QAAQ,CACjCuB,EAAUC,EAAAA,CAAAA,CAAAA,IAAkB,CAAC,SAACC,CAAC,E,OAAKA,EAAE9B,GAAG,GAAKA,C,GAIpD,OAHI4B,GACFD,EAAIrB,IAAI,CAAC,OAAKsB,GAAAA,CAASvB,SAAAA,EAAU0B,MAAOH,EAAQI,KAAK,CAAG3B,C,IAEnDsB,CACT,EAAG,EAAE,EAMCI,EAAQN,EAAUC,MAAM,CAAC,SAACC,CAAG,CAAE,CAALA,E,OAAmBA,EAAZI,EAAAA,KAAK,A,EAAoB,GAC1DE,EAAOR,EAAUN,GAAG,CAAC,Y,OAAGnB,EAAAA,GAAG,A,GAEjC,OACE,gBAAC,OAAI,qBAAmB,U,EACtB,gBAACqB,EAAAA,MACD,gBAAC,QAAKa,UAAU,Y,EACd,gBAAC,UAAG,UACJ,gBAAC,MAAGA,UAAU,uB,EACXT,EAAUN,GAAG,CAAC,SAACgB,CAAE,CAAEC,CAAC,E,OACnB,gBAACC,EAAAA,CAAQA,CAAAA,EAAAA,EAAAA,CAAAA,EAAKF,GAAAA,CAAIG,IAAKF,C,OAG3B,gBAAC,WACD,gBAAC,KAAEF,UAAU,mB,EAAoB,UAAQH,EAAM,SAC/C,gBAAC,OAAIG,UAAU,qB,EACb,gBAACK,EAAAA,CAAMA,CAAAA,CAACC,KAAK,qBAAqBZ,QAAQ,S,EAAU,YAGpD,gBAACW,EAAAA,CAAMA,CAAAA,CAACC,KAAK,IAAIZ,QAAQ,W,EAAY,sBAIvC,gBAACJ,EAAAA,CAAgBS,KAAMA,C,IAEzB,gBAACV,EAAAA,MAGP,C,mEClDe,c,IACbiB,EAAAA,EAAAA,IAAI,CACJC,EAAAA,EAAAA,IAAI,CACJC,EAAAA,EAAAA,KAAK,CACLC,EAAAA,EAAAA,QAAQ,CACRC,EAAAA,EAAAA,OAAO,CAAPA,EAAAA,EACAV,SAAS,CACTW,EAAAA,EAAAA,QAAQ,CACRC,EAAAA,EAAAA,MAAM,CAANA,EAAAA,EACA/B,IAAI,CAAG,IACPa,OAAO,CACPmB,EAAAA,EAAAA,KAAK,CAGL,OAAOC,EAAAA,aAAmB,CADdR,EAAO,IAAM,SAGvB,CACEG,SAAAA,EACAH,KAAAA,EACAC,KAAAA,EACAC,MAAAA,EACAK,MAAAA,EACA,UAAWD,GAAkBG,KAAAA,EAC7Bf,UAAY,sBAAgCA,MAAAA,CAbtC,AAAVN,KAAAA,IAAU,gBAamC,KACvCgB,MAAAA,CAlBM,AAAZV,KAAAA,IAAY,OAiB8C,KAEnCnB,MAAAA,CADjB6B,EAAU,oBAAsB,GACjC,oBAAuBM,MAAAA,CAhBrB,AAAPnC,KAAAA,IAAO,aAiBL,EACA,gBAAC,OAAImB,UAAU,iB,EAAmBW,GAEtC,C,qFC3Be,c,IAAG7C,EAAAA,EAAAA,GAAG,CAAEmD,EAAAA,EAAAA,EAAE,CAAEC,EAAAA,EAAAA,IAAI,CAAE/C,EAAAA,EAAAA,QAAQ,CAAE0B,EAAAA,EAAAA,KAAK,CAAEjB,EAAAA,EAAAA,KAAK,CAC/CuC,EAAO,YAAqBrD,MAAAA,CAAVmD,EAAG,SAAWD,MAAAA,CAAJlD,GAWlC,OACE,gBAAC,MAAGkC,UAAU,Y,EACZ,gBAAC,KAAEM,KAAMa,EAAKnB,UAAU,mB,EACtB,gBAAC,OACCrB,IAAKA,AAAAA,CAAAA,EAAAA,EAAAA,CAAAA,AAAAA,EAAIC,EAAO,KAChBwC,OAAQrC,AAAAA,CAAAA,EAAAA,EAAAA,CAAAA,AAAAA,EAAOH,EAAO,CAAC,IAAK,IAAI,EAChCI,MAAM,QACNqC,IAAKH,EACLI,MAAM,MACNC,OAAO,K,IAGX,gBAAC,OAAIvB,UAAU,qB,EACb,gBAAC,KAAEM,KAAMa,EAAKnB,UAAU,kB,EACtB,gBAAC,cAAQkB,GACT,gBAAC,WACApD,GAGH,gBAAC,OAAIkC,UAAU,sB,EACb,gBAAC,YAAM7B,GAEP,gBAAC,QAAKqD,OAAO,wBAAwBC,OAAO,OAAOC,SA/B3D,SAAgB7D,CAAE,EAChBH,OAAOW,aAAa,CAClB,IAAIC,YAAY,mBAAoB,CAClCP,OAAQ,CAAED,IAAAA,CAAI,CAChB,IAEFD,EAAG8D,cAAc,EACnB,C,EAyBU,gBAAC,SAAMpB,KAAK,SAASW,KAAK,MAAMV,MAAO1C,C,GACvC,gBAACuC,EAAAA,CAAMA,CAAAA,CACLX,QAAQ,YACRgB,QAAAA,CAAAA,EACAH,KAAK,SACLC,MAAM,SACN3B,KAAK,QACLgC,MAAQ,UAAcG,MAAAA,CAALE,EAAKF,a,EACtB,gBAAC,OAAIY,MAAM,6BAA6BC,KAAK,OAAON,OAAO,KAAKD,MAAM,KAAKQ,QAAQ,W,EACjF,gBAAC,QACCD,KAAK,OACLE,EAAE,wG,OAMZ,gBAAC,OAAI/B,UAAU,mB,EAAqBH,EAAM,UAIlD,C"}